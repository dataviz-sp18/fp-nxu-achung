---
title: "FP"
author: "Alice Mee Seon Chung"
date: "5/24/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message = FALSE,
                      warning = FALSE,
                      echo = FALSE,
                      cache = T)
library(tidyverse)
library(knitr)
library(broom)
library(stringr)
library(modelr)
library(forcats)
library(tidytext)
library(wordcloud)
library(scales)
library(rtweet)
library(tm)
library(SnowballC)
library(RColorBrewer)
library(ggmap)
library(reshape2)
library(maps)
library(foreign)
library(readstata13)
library(stargazer)
library(lmtest)
library(coefplot)
library(gtools)

options(digits = 3)
set.seed(1234)
theme_set(theme_minimal())
```

```{r}
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
df2010<-read.dta13('data/data_2010.dta',
                   missing.type = T,
                   nonint.factors = T,
                   generate.factors = T) %>%
  mutate_each(funs(replace(., . == "Not applicable", NA))) %>%
  mutate_each(funs(replace(., . == "Not applicable_(-8)", NA))) %>%
  mutate_each(funs(replace(., . == "Unknown", NA))) 

df2014<-read.dta13('data/data_2014.dta',
                   missing.type = T,
                   nonint.factors = T,
                   generate.factors = T) %>%
  mutate_each(funs(replace(., . == "Not applicable", NA))) %>%
  mutate_each(funs(replace(., . == "Not applicable_(-8)", NA))) %>%
  mutate_each(funs(replace(., . == "Unknown", NA)))


# dat <- smartbind(df2010, df2014)

joined <- df2010 %>%
  inner_join(df2014, by = "pid", suffix = c("_2010", "_2014"))
```


```{r}
joined <- joined %>% 
  mutate(income_diff = income_2014 - income_2010) %>%
  
  


```















